<!DOCTYPE html><html data-n-head="" data-n-head-ssr><meta data-n-head="true" content="width=device-width,initial-scale=1" name="viewport"><meta data-n-head="true" charset="utf8"><meta data-n-head="true" href="/static/logo.png" rel="icon" type="image/x-icon"><meta data-n-head="true" content="RyanWillDev" name="title"><meta data-n-head="true" content="https://ryanwilldev.com/logo.png" property="og:image"><meta data-n-head="true" content="1200" property="og:image:width"><meta data-n-head="true" content="630" property="og:image:height"><meta data-n-head="true" content="@RyanWillDev" name="twitter:creator"><meta data-n-head="true" content="summary_large_image" name="twitter:card"><meta data-n-head="true" content="https://ryanwilldev.com/logo.png" name="twitter:image"><meta data-n-head="true" content="An introduction to Service workers. What they are, how they work, and what they can do for you." name="description" data-hid="desc"><meta data-n-head="true" content="Putting Service workers to work" property="og:title" data-hid="og:title"><meta data-n-head="true" content="An introduction to Service workers. What they are, how they work, and what they can do for you." property="og:description" data-hid="og:desc"><meta data-n-head="true" content="https://ryanwilldev.com/journal/working-with-service-workers" property="og:url" data-hid="og:url"><meta data-n-head="true" content="article" property="og:type" data-hid="og:type"><meta data-n-head="true" content="An introduction to Service workers. What they are, how they work, and what they can do for you." name="twitter:description" data-hid="t:desc"><title data-n-head="true">RyanWillDev | Web Developer</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" rel="stylesheet" data-n-head="true"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/atom-one-dark.min.css" rel="stylesheet" data-n-head="true"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" data-n-head="true"><link href="https://ryanwilldev.com/journal/entry/working-with-service-workers" rel="canonical" data-n-head="true" data-hid="con"><link href="/_nuxt/manifest.29aaeb6ab1957e36d5c0.js" rel="preload" as="script"><link href="/_nuxt/common.75bec7e0d2bf763c4a7c.js" rel="preload" as="script"><link href="/_nuxt/app.480303e67872f11830ea.js" rel="preload" as="script"><link href="/_nuxt/layouts/default.e2d0cb9be80d9748f66f.js" rel="preload" as="script"><link href="/_nuxt/pages/journal/entry/_journalEntry.7a52b50fdab9a0a0bb82.js" rel="preload" as="script"><link href="/_nuxt/pages/journal/index.042d343d4f400fc5aeed.js" rel="prefetch"><link href="/_nuxt/pages/journal/filtered/_selectedTag.312a03cb1b3124e37330.js" rel="prefetch"><link href="/_nuxt/pages/projects/index.e8738d8430e37cfa17aa.js" rel="prefetch"><link href="/_nuxt/pages/about/index.722f5dd9dcfa92bc3343.js" rel="prefetch"><link href="/_nuxt/pages/index.8bec6336e0cdf6b797cd.js" rel="prefetch"><style data-vue-ssr-id="48002059:0 1eff34f5:0 053b098f:0 5bb6d51e:0 fdbdb078:0 e5cbb4e0:0 545df619:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;-webkit-transition:width .2s,opacity .4s;transition:width .2s,opacity .4s;opacity:1;background-color:#efc14e;z-index:999999}body,html{color:#bcbcbc;font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}ul li{list-style:none;padding:0}.nav-container{background-color:#313233;height:100%;left:0;padding-bottom:10px;position:fixed;top:0;text-align:center;max-width:355px;width:25%;z-index:1}.nav-container a,.nav-container a:visited{color:#bcbcbc;list-style:none;text-decoration:none}.nav-container a:active,.nav-container a:hover{border-bottom:2px solid #42b4d6}.nav-container a:active{color:#42b4d6}.nav-container nav{height:100%}.nav-container h2{font-size:2.5em;font-weight:700;margin:0;padding-top:48px}.nav-container #callout{color:#42b4d6}@media screen and (max-width:1100px){.nav-container{height:80px;max-width:100%;width:100%}.nav-container,.nav-container nav{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex}.nav-container nav{-ms-align-items:center;width:50%}.nav-container h2{margin-right:auto;padding:10px 0 10px 10px}}@media screen and (max-width:800px){.nav-container{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}}@media screen and (max-width:699px){.nav-container{flex-wrap:wrap;-webkit-flex-wrap:wrap;-moz-flex-wrap:wrap;-ms-flex-wrap:wrap;-o-flex-wrap:wrap;height:100px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.nav-container nav{height:50px}.nav-container h2{padding:10px 0 0;width:100%}}ul[data-v-ef336d60]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:40%;-ms-flex-pack:distribute;justify-content:space-around;list-style:none;margin:0;padding:30px 0 0}a[data-v-ef336d60]{font-size:1.75em;font-weight:400;margin:0 10px;padding:5px 5px 0}a.router-link-active[data-v-ef336d60],a[data-v-ef336d60]:hover{border-bottom:2px solid #42b4d6}@media screen and (max-width:1200px){a[data-v-ef336d60]{font-size:1.5em}}@media screen and (max-width:1100px){ul[data-v-ef336d60]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around;padding:0 10px 0 0;width:100%}}@media screen and (max-width:600px){a[data-v-ef336d60]{font-size:1.2em}}ul[data-v-1688f4e4]{bottom:50px;display:-moz-flex;display:-ms-flex;display:-o-flex;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;margin:0 auto;padding:0;position:absolute;width:100%}li[data-v-1688f4e4]{list-style:none}a[data-v-1688f4e4]{padding:5px}i[data-v-1688f4e4]:active{color:#42b4d6}i[data-v-1688f4e4]{color:#bcbcbc;font-size:1.75em}@media screen and (max-width:1100px){.lg-only[data-v-1688f4e4]{display:none}}.formatted-page{color:#313233;font-size:1.1em;line-height:1.25;margin:calc(100px + 6%) 2% 8% 4%;padding-right:3%;text-align:left}.formatted-page a{color:#42b4d6;font-weight:700;text-decoration:underline}@media screen and (max-width:700px){.formatted-page{margin-top:calc(100px + 8%)}}@media screen and (min-width:1100px){.formatted-page{margin:48px 3% 8% calc(355px + 2%)}}.entry-container h1{margin-bottom:.2em}.entry-container h2,.entry-container h3{margin-bottom:24px;margin-top:56px}.entry-container pre{white-space:pre-wrap}@media screen and (max-width:750px){.entry-container pre{font-size:.8em}}@media screen and (max-width:650px){.entry-container pre{font-size:.65em}}.entry-container pre code{border-radius:5px;margin:24px 0;width:90%}.entry-container .pub-date{display:block;margin-bottom:24px}@media screen and (min-width:750px){.entry-container .pub-date{margin-bottom:48px}}.entry-container .hljs-keyword{border-radius:5px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px}.entry-container p>code.hljs{border-radius:5px;display:inline;padding:0 4px}@media screen and (min-width:650px){.entry-container{padding-right:10%}}.entry-container blockquote{border-left:5px solid #bcbcbc;padding:10px}</style><body data-n-head=""><div id="__nuxt" data-server-rendered="true"><div class="nuxt-progress" style="width:0%;height:2px;background-color:#000;opacity:0"></div><div><aside class="nav-container"><h2>RyanWill<span id="callout">Write</span></h2><nav><ul data-v-ef336d60><li data-v-ef336d60><a href="/about" data-v-ef336d60>About</a><li data-v-ef336d60><a href="/projects" data-v-ef336d60>Projects</a><li data-v-ef336d60><a href="/journal" class="router-link-active" data-v-ef336d60>Journal</a></ul><ul class="lg-only" data-v-1688f4e4><li data-v-1688f4e4><a href="https://twitter.com/ryanwilldev" data-v-1688f4e4><i class="fa fa-twitter" data-v-1688f4e4></i></a><li data-v-1688f4e4><a href="https://www.linkedin.com/in/ryanwilldev" data-v-1688f4e4><i class="fa fa-linkedin" data-v-1688f4e4></i></a><li data-v-1688f4e4><a href="https://github.com/ryanwilldev" data-v-1688f4e4><i class="fa fa-github" data-v-1688f4e4></i></a></ul></nav></aside><section class="formatted-page"><section class="entry-container"><h1>Putting Service workers to work</h1><span class="pub-date">January 13, 2018</span><section><p>Service workers are event driven JavaScript files that can be registered as background tasks with the browser.<h2 id="registeringaserviceworker">Registering a service worker</h2><p>In order to get a service worker to do your bidding, you must first register it with the browser.<pre><code class="javascript language-javascript">if (navigator.serviceWorker) {
  navigator.serviceWorker
    .register('/serviceWorker.js')
    .then(result => {
      console.log('Service Worker registered!', result);
    });
}
</code></pre><p>The check for <code>navigator.serviceWorker</code> is necessary because some browsers do not yet support service workers. I'm looking at you Safari.<p>For up to date info on what browser support check out the service worker page on <a href="https://caniuse.com/#feat=serviceworkers">caniuse.com</a>.<h2 id="soserviceworkersarejustjs">So, service workers are just JS?</h2><p>Well, not exactly. While you do write the service worker in JavaScript, they behave a bit differently than the JavaScript you're used to. They run in a separate thread, and they do not have access to the DOM.<p>Instead, service workers register a series of events to which they want to respond. These events include lifecycle events (install, activate, and download) for the service worker itself as well as fetch events issued by the browser, among others. Registering an event in the service worker should look like pretty standard JavaScript.<p>Here is a very simple example of registering an event to watch for the service worker's install event which is called every time a new service worker is downloaded by the brower. Self in the snippet below references the service worker.<pre><code class="javascript language-javascript">self.addEventListener('install', event => {
  console.log('Service Worker was installed!', event);
});
</code></pre><h2 id="reliableworker">Reliable worker</h2><p>When you register an event listener for fetch events issued by the browser the service worker effectively becomes a proxy server, a middleman, between the browser and the actually server that hosts the assets you want.<p>Note that an AJAX request is not the same as a request sent using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a>. Service workers can only intercept requests made using the Fetch API.<p>You can choose with each request whether to cache the response, or, perhaps, not send the request to the server at all and respond with a previously cached response. You can even load your app without an internet connection by caching the necessary assets when the service worker is installed. This is a technique known as pre-caching the app shell.<h2 id="workinginthebackground">Working in the background</h2><p>Since service workers run as background tasks separate from the thread your nomral JavaScript runs in, they are able to listen and respond to events even when the browser is not open.<p>This enables features such as background sync and push notifications, which allow developers to create more resilent and immersive UIs.</section></section></section></div></div><script type="text/javascript">window.__NUXT__={layout:"default",data:[{entry:{data:{title:"Putting Service workers to work",url:"working-with-service-workers",description:"An introduction to Service workers. What they are, how they work, and what they can do for you.",tags:["PWA","Progressive Web App","PWA","service workers"],publicationDate:"January 13, 2018"},html:'<p>Service workers are event driven JavaScript files that can be registered as background tasks with the browser.</p>\n<h2 id="registeringaserviceworker">Registering a service worker</h2>\n<p>In order to get a service worker to do your bidding, you must first register it with the browser.</p>\n<pre><code class="javascript language-javascript">if (navigator.serviceWorker) {\n  navigator.serviceWorker\n    .register(\'/serviceWorker.js\')\n    .then(result =&gt; {\n      console.log(\'Service Worker registered!\', result);\n    });\n}\n</code></pre>\n<p>The check for <code>navigator.serviceWorker</code> is necessary because some browsers do not yet support service workers.\nI\'m looking at you Safari.</p>\n<p>For up to date info on what browser support check out the service worker page on <a href="https://caniuse.com/#feat=serviceworkers">caniuse.com</a>.</p>\n<h2 id="soserviceworkersarejustjs">So, service workers are just JS?</h2>\n<p>Well, not exactly. While you do write the service worker in JavaScript, they behave a bit differently than the JavaScript you\'re used to.\nThey run in a separate thread, and they do not have access to the DOM.</p>\n<p>Instead, service workers register a series of events to which they want to respond.\nThese events include lifecycle events (install, activate, and download) for the service worker itself as well as fetch events issued by the browser, among others.\nRegistering an event in the service worker should look like pretty standard JavaScript.</p>\n<p>Here is a very simple example of registering an event to watch for the service worker\'s install event which is called every time a new service worker is\ndownloaded by the brower.\nSelf in the snippet below references the service worker.</p>\n<pre><code class="javascript language-javascript">self.addEventListener(\'install\', event =&gt; {\n  console.log(\'Service Worker was installed!\', event);\n});\n</code></pre>\n<h2 id="reliableworker">Reliable worker</h2>\n<p>When you register an event listener for fetch events issued by the browser the service worker effectively becomes a proxy server, a middleman, between\nthe browser and the actually server that hosts the assets you want.</p>\n<p>Note that an AJAX request is not the same as a request sent using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a>.\nService workers can only intercept requests made using the Fetch API.</p>\n<p>You can choose with each request whether to cache the response, or, perhaps, not send the request to the server at all and respond with a previously\ncached response.\nYou can even load your app without an internet connection by caching the necessary assets when the service worker is installed.\nThis is a technique known as pre-caching the app shell.</p>\n<h2 id="workinginthebackground">Working in the background</h2>\n<p>Since service workers run as background tasks separate from the thread your nomral JavaScript runs in, they are able to listen and respond to events even when\nthe browser is not open.</p>\n<p>This enables features such as background sync and push notifications, which allow developers to create more resilent and immersive UIs.</p>'}}],error:null,serverRendered:!0}</script><script defer src="/_nuxt/manifest.29aaeb6ab1957e36d5c0.js"></script><script defer src="/_nuxt/layouts/default.e2d0cb9be80d9748f66f.js"></script><script defer src="/_nuxt/pages/journal/entry/_journalEntry.7a52b50fdab9a0a0bb82.js"></script><script defer src="/_nuxt/common.75bec7e0d2bf763c4a7c.js"></script><script defer src="/_nuxt/app.480303e67872f11830ea.js"></script>